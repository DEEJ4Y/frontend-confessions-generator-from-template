(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{5564:function(e,t,n){"use strict";var r=n(5893);t.Z=function(e){var t=e.style,n=e.variant,a=e.size;return(0,r.jsx)("div",{className:"d-flex justify-content-center",style:t,children:(0,r.jsx)("div",{className:"spinner-border text-".concat(n||"primary"," ").concat(a?"spinner-border-".concat(a):""),role:"status",children:(0,r.jsx)("span",{className:"sr-only visually-hidden",children:"Loading..."})})})}},3483:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(5861),a=n(8152),s=n(7757),o=n.n(s),i=n(1163),c=n(7294),l=n(8375),u=n(5005),d=n(3795),f=n(7672);function m(){return(m=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.confession,r=t.projectId,a=t.callback,e.prev=1,e.next=4,fetch("".concat(f.apiUrl,"/confessions"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({confession:n,project:r})});case 4:if(201!==e.sent.status){e.next=9;break}a(),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function p(e){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.websiteConfigId,r=t.router,e.prev=1,e.next=4,fetch("".concat(f.apiUrl,"/websiteConfigs/").concat(n));case 4:if(200!==(a=e.sent).status){e.next=9;break}return e.abrupt("return",a.json());case 9:r.push("/page-not-found");case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),r.push("/page-not-found");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}var h=n(5094),x=n(5564),y=n(5893);function b(){var e=(0,i.useRouter)(),t=c.useState(!1),n=(0,a.Z)(t,2),s=n[0],f=n[1],v=c.useState(!1),b=(0,a.Z)(v,2),g=b[0],j=b[1],N=c.useState(""),w=(0,a.Z)(N,2),Z=w[0],C=w[1],k=c.useState({display:!1,variant:"danger",message:""}),I=(0,a.Z)(k,2),$=I[0],F=I[1],P=c.useRef((function(){}));c.useEffect((function(){var t=(0,h.Z)("id");if(t&&(f((function(){return t})),P.current(t)),e&&e.query){var n=e.query.websiteConfigId;n&&P.current(n)}}),[e,e.query]),P.current=function(){var t=(0,r.Z)(o().mark((function t(n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,p({websiteConfigId:n,router:e});case 3:(r=t.sent)&&r.data?!1===r.data.visibility?e.push("/page-not-found"):(f((function(){return r.data})),j((function(){return r.data.backgroundImage.imageData}))):e.push("/page-not-found");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var S=function(){0===Z.length?F((function(){return{display:!0,variant:"danger",message:"Please add some text."}})):(F((function(){return{display:!0,variant:"primary",message:"Submitting"}})),function(e){m.apply(this,arguments)}({confession:Z,projectId:s.project.id,callback:function(){F((function(){return{display:!0,variant:"success",message:"Submitted successfully!"}})),C((function(){return""}))}}))};return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{style:{backgroundImage:"url(".concat(g,")"),width:"100vw",height:"100vh",backgroundSize:"cover"},children:(0,y.jsx)("div",{style:{width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.3)"},children:(0,y.jsx)("div",{style:{maxWidth:"48rem",margin:"0 auto",padding:"1rem",display:"flex",height:"100%",flexDirection:"column",justifyContent:"center"},children:s.title?(0,y.jsxs)("div",{children:[(0,y.jsx)("h1",{className:"text-center mb-4",style:{color:s.titleFontColor},children:s.title}),(0,y.jsx)("p",{className:"text-start mb-0",style:{color:s.messageFontColor},children:s.message}),(0,y.jsx)(d.Z.Control,{as:"textarea",rows:1,style:{maxHeight:"12rem",overflowY:"scroll"},value:Z,onChange:function(e){var t=e.target.value;C((function(){return t.substring(0,s.project.template.maxCharacters)}))}}),(0,y.jsxs)("p",{className:"small text-secondary mb-0",children:["Maximum character count:"," ",s&&s.project?s.project.template.maxCharacters:""]}),$.display?(0,y.jsx)(l.Z,{variant:$.variant,children:$.message}):"",(0,y.jsx)(u.Z,{className:"float-end",variant:"light",onClick:function(){S()},children:"Submit"})]}):(0,y.jsx)(x.Z,{})})})})})}},5094:function(e,t){"use strict";t.Z=function(e){if(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))return decodeURIComponent(e[1])}},2229:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/anonymous",function(){return n(3483)}])},8375:function(e,t,n){"use strict";var r=n(4036),a=n.n(r),s=n(7294),o=n(8523),i=n(6895),c=n(5520),l=n(600),u=n(1068),d=n(1485),f=n(9602),m=n(4680),p=n(5893);const v=(0,f.Z)("h4");v.displayName="DivStyledAsH4";const h=(0,m.Z)("alert-heading",{Component:v}),x=(0,m.Z)("alert-link",{Component:c.Z}),y={variant:"primary",show:!0,transition:u.Z,closeLabel:"Close alert"},b=s.forwardRef(((e,t)=>{const{bsPrefix:n,show:r,closeLabel:s,closeVariant:c,className:f,children:m,variant:v,onClose:h,dismissible:x,transition:y,...b}=(0,o.Ch)(e,{show:"onClose"}),g=(0,l.vE)(n,"alert"),j=(0,i.Z)((e=>{h&&h(!1,e)})),N=!0===y?u.Z:y,w=(0,p.jsxs)("div",{role:"alert",...N?void 0:b,ref:t,className:a()(f,g,v&&`${g}-${v}`,x&&`${g}-dismissible`),children:[x&&(0,p.jsx)(d.Z,{onClick:j,"aria-label":s,variant:c}),m]});return N?(0,p.jsx)(N,{unmountOnExit:!0,...b,ref:void 0,in:r,children:w}):r?w:null}));b.displayName="Alert",b.defaultProps=y,t.Z=Object.assign(b,{Link:x,Heading:h})},3818:function(e,t,n){"use strict";var r=n(4036),a=n.n(r),s=n(7294),o=n(5697),i=n.n(o),c=n(5893);const l={type:i().string,tooltip:i().bool,as:i().elementType},u=s.forwardRef((({as:e="div",className:t,type:n="valid",tooltip:r=!1,...s},o)=>(0,c.jsx)(e,{...s,ref:o,className:a()(t,`${n}-${r?"tooltip":"feedback"}`)})));u.displayName="Feedback",u.propTypes=l,t.Z=u},3795:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var r=n(4036),a=n.n(r),s=n(5697),o=n.n(s),i=n(7294),c=n(3818),l=n(6558),u=n(1377),d=n(600),f=n(5893);const m=i.forwardRef((({bsPrefix:e,className:t,htmlFor:n,...r},s)=>{const{controlId:o}=(0,i.useContext)(u.Z);return e=(0,d.vE)(e,"form-check-label"),(0,f.jsx)("label",{...r,ref:s,htmlFor:n||o,className:a()(t,e)})}));m.displayName="FormCheckLabel";var p=m;const v=i.forwardRef((({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,disabled:s=!1,isValid:o=!1,isInvalid:m=!1,feedbackTooltip:v=!1,feedback:h,feedbackType:x,className:y,style:b,title:g="",type:j="checkbox",label:N,children:w,as:Z="input",...C},k)=>{t=(0,d.vE)(t,"form-check"),n=(0,d.vE)(n,"form-switch");const{controlId:I}=(0,i.useContext)(u.Z),$=(0,i.useMemo)((()=>({controlId:e||I})),[I,e]),F=null!=N&&!1!==N&&!w,P=(0,f.jsx)(l.Z,{...C,type:"switch"===j?"checkbox":j,ref:k,isValid:o,isInvalid:m,disabled:s,as:Z});return(0,f.jsx)(u.Z.Provider,{value:$,children:(0,f.jsx)("div",{style:b,className:a()(y,N&&t,r&&`${t}-inline`,"switch"===j&&n),children:w||(0,f.jsxs)(f.Fragment,{children:[P,F&&(0,f.jsx)(p,{title:g,children:N}),h&&(0,f.jsx)(c.Z,{type:x,tooltip:v,children:h})]})})})}));v.displayName="FormCheck";var h=Object.assign(v,{Input:l.Z,Label:p}),x=n(4716),y=(0,n(4680).Z)("form-floating");const b=i.forwardRef((({controlId:e,as:t="div",...n},r)=>{const a=(0,i.useMemo)((()=>({controlId:e})),[e]);return(0,f.jsx)(u.Z.Provider,{value:a,children:(0,f.jsx)(t,{...n,ref:r})})}));b.displayName="FormGroup";var g=b;n(2473);const j=["xxl","xl","lg","md","sm","xs"];const N=i.forwardRef(((e,t)=>{const[{className:n,...r},{as:s="div",bsPrefix:o,spans:i}]=function({as:e,bsPrefix:t,className:n,...r}){t=(0,d.vE)(t,"col");const s=[],o=[];return j.forEach((e=>{const n=r[e];let a,i,c;delete r[e],"object"===typeof n&&null!=n?({span:a,offset:i,order:c}=n):a=n;const l="xs"!==e?`-${e}`:"";a&&s.push(!0===a?`${t}${l}`:`${t}${l}-${a}`),null!=c&&o.push(`order${l}-${c}`),null!=i&&o.push(`offset${l}-${i}`)})),[{...r,className:a()(n,...s,...o)},{as:e,bsPrefix:t,spans:s}]}(e);return(0,f.jsx)(s,{...r,ref:t,className:a()(n,!i.length&&o)})}));N.displayName="Col";var w=N;const Z=i.forwardRef((({as:e="label",bsPrefix:t,column:n,visuallyHidden:r,className:s,htmlFor:o,...c},l)=>{const{controlId:m}=(0,i.useContext)(u.Z);t=(0,d.vE)(t,"form-label");let p="col-form-label";"string"===typeof n&&(p=`${p} ${p}-${n}`);const v=a()(s,t,r&&"visually-hidden",n&&p);return o=o||m,n?(0,f.jsx)(w,{ref:l,as:"label",className:v,htmlFor:o,...c}):(0,f.jsx)(e,{ref:l,className:v,htmlFor:o,...c})}));Z.displayName="FormLabel",Z.defaultProps={column:!1,visuallyHidden:!1};var C=Z;const k=i.forwardRef((({bsPrefix:e,className:t,id:n,...r},s)=>{const{controlId:o}=(0,i.useContext)(u.Z);return e=(0,d.vE)(e,"form-range"),(0,f.jsx)("input",{...r,type:"range",ref:s,className:a()(t,e),id:n||o})}));k.displayName="FormRange";var I=k;const $=i.forwardRef((({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:s=!1,isInvalid:o=!1,id:c,...l},m)=>{const{controlId:p}=(0,i.useContext)(u.Z);return e=(0,d.vE)(e,"form-select"),(0,f.jsx)("select",{...l,size:n,ref:m,className:a()(r,e,t&&`${e}-${t}`,s&&"is-valid",o&&"is-invalid"),id:c||p})}));$.displayName="FormSelect";var F=$;const P=i.forwardRef((({bsPrefix:e,className:t,as:n="small",muted:r,...s},o)=>(e=(0,d.vE)(e,"form-text"),(0,f.jsx)(n,{...s,ref:o,className:a()(t,e,r&&"text-muted")}))));P.displayName="FormText";var S=P;const E=i.forwardRef(((e,t)=>(0,f.jsx)(h,{...e,ref:t,type:"switch"})));E.displayName="Switch";var R=Object.assign(E,{Input:h.Input,Label:h.Label});const O=i.forwardRef((({bsPrefix:e,className:t,children:n,controlId:r,label:s,...o},i)=>(e=(0,d.vE)(e,"form-floating"),(0,f.jsxs)(g,{ref:i,className:a()(t,e),controlId:r,...o,children:[n,(0,f.jsx)("label",{htmlFor:r,children:s})]}))));O.displayName="FloatingLabel";var T=O;const _={_ref:o().any,validated:o().bool,as:o().elementType},L=i.forwardRef((({className:e,validated:t,as:n="form",...r},s)=>(0,f.jsx)(n,{...r,ref:s,className:a()(e,t&&"was-validated")})));L.displayName="Form",L.propTypes=_;var z=Object.assign(L,{Group:g,Control:x.Z,Floating:y,Check:h,Switch:R,Label:C,Text:S,Range:I,Select:F,FloatingLabel:T})},6558:function(e,t,n){"use strict";var r=n(4036),a=n.n(r),s=n(7294),o=n(1377),i=n(600),c=n(5893);const l=s.forwardRef((({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:l=!1,isInvalid:u=!1,as:d="input",...f},m)=>{const{controlId:p}=(0,s.useContext)(o.Z);return t=(0,i.vE)(t,"form-check-input"),(0,c.jsx)(d,{...f,ref:m,type:r,id:e||p,className:a()(n,t,l&&"is-valid",u&&"is-invalid")})}));l.displayName="FormCheckInput",t.Z=l},1377:function(e,t,n){"use strict";const r=n(7294).createContext({});t.Z=r},4716:function(e,t,n){"use strict";var r=n(4036),a=n.n(r),s=n(7294),o=(n(2473),n(3818)),i=n(1377),c=n(600),l=n(5893);const u=s.forwardRef((({bsPrefix:e,type:t,size:n,htmlSize:r,id:o,className:u,isValid:d=!1,isInvalid:f=!1,plaintext:m,readOnly:p,as:v="input",...h},x)=>{const{controlId:y}=(0,s.useContext)(i.Z);let b;return e=(0,c.vE)(e,"form-control"),b=m?{[`${e}-plaintext`]:!0}:{[e]:!0,[`${e}-${n}`]:n},(0,l.jsx)(v,{...h,type:t,size:r,ref:x,readOnly:p,id:o||y,className:a()(u,b,d&&"is-valid",f&&"is-invalid","color"===t&&`${e}-color`)})}));u.displayName="FormControl",t.Z=Object.assign(u,{Feedback:o.Z})},2473:function(e){"use strict";var t=function(){};e.exports=t},5861:function(e,t,n){"use strict";function r(e,t,n,r,a,s,o){try{var i=e[s](o),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var o=e.apply(t,n);function i(e){r(o,a,s,i,c,"next",e)}function c(e){r(o,a,s,i,c,"throw",e)}i(void 0)}))}}n.d(t,{Z:function(){return a}})},8152:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:function(){return a}})}},function(e){e.O(0,[774,598,888,179],(function(){return t=2229,e(e.s=t);var t}));var t=e.O();_N_E=t}]);